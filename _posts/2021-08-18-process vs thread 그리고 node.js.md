# **프로세스와 쓰레드는 무슨차이며, 이게 Nodejs와 무슨 연관이 있을까**

![javasciprt](https://img.shields.io/badge/javascript-up%20to%20date-yellow)

![typescript](https://img.shields.io/badge/typescript-up%20to%20date-blue)

---

예를 들어,

컴퓨터에는 메모리라고 하는 이른바 "저장공간" 이 존재한다.
이 저장공간들은 각각의 데이터 자료들을 타입에 따라 일정 양만큼을 호출하여 저장하고, 일정 양만큼을 계산하여 리턴할 수 있는 기능을 한다.

예를들어, 우리가 단순하게 변수를 선언하고 거기에 특정 값을 할당한다고 하는 행위자체조차

어떠한 메모리 공간에 이름을 붙이고, 그 공간 안에다가 특정한 값을 저장하는 상태와 동일하다는 뜻이다.

이를 기반으로 프로세스에 대해서 말하자면

> 프로세스란 메모리에 올라와서 실행되고 있는 프로그램의 인스턴스

라고 설명이 된다.

즉, 특정 메모리 공간을 차지하고, 필요한 컴퓨터 자원들을 끌어다가 사용하면서 실행되고 있는 프로그램의 단위를 의미한다는 뜻이다.

이 프로세스의 내부적인 형태는

- Data
- Heap
- Code
- Stack

으로 이루어져있다. heap은 레퍼런스 주소와 같은(이른바 객체와 같은) 존재들이 저장된 공간이고, data는 순수한 테이터불변값, code는 각각의 토큰들이 뭉쳐져서 하나의 문을 형성한 말그대로 코드들의 집합, stack은 함수등의 호출로 인해 실행 컨텍스트들이 누적되는 자료구조이다.

이 프로세스의 내부에는 최소 1개이상의 메인 스레드가 존재한다.

# 스레드란 무슨 의미일까

스레드는 이렇게 프로그램 실행을 위한 코드와 데이터들의 집합인 프로세스의 안에서 특정 행동의 수행을 단위별로 쪼갠 것을 의미한다.

즉, 간단하게 말하자면 우리의 이벤트루프를 설명해주는 보라돌이형이 말하는 stack, queue, event loop 를 한 단위로 실행단위를 쪼갠 것이 스레드라는 것이다.

이것을 마치 객체처럼 표현하자면(**절대 이렇게 생기진 않았으나**)

외부에서 컴퓨터자원, 메모리 공간 차지 등을 하고나면
.
.
.
process = {
Code : [...],
Data : [...],
Heap : {...},
Thread1 : [...stack, ...register],
Thread2 : [...stack, ...register],
.
.
.
(NodeJs는 주요 javascript의 처리를 하나의 쓰레드가 실행하므로, 단일 쓰레드라고 불린다만 전체적으론 단일 쓰레드가 아니다.)
(그 하나의 쓰레드가 데이터를 처리하는 것을 queue와 event loop를 통해서 해결하였다)
ThreadX : {[...stack], [...queue], eventLoop},
.
.
.
}

와 같이 정리해보고싶다. 각각의 Thread들은 프로세스 내에서 Stack들을 따로따로 할당받고, Code와 Data 그리고 Heap영역은 공유를 한다. 이 말의 뜻은, 한 스레드가 자원을 변경하면 다른 스레드들도 그 변경 결과를 공유한다는 뜻이다.
